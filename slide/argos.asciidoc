= Bitbar/SwiftBarã‚’Linuxã§ã‚‚ä½¿ã„ãŸã„
Kenichiro Matohara(matoken) <maroken@kagolug.org> CC BY-NC-SA
:revnumber: 1.0
:revdate: 2021-01-01(Sat)
:revremark: æ±æµ·é“ã‚‰ã 01æœˆã®ã‚ªãƒ•ãªé›†ã¾ã‚Šã€Œ{doctitle}ã€
:homepage: https://matoken.org/
:imagesdir: resources
:data-uri:
:figure-caption!:
:backend: revealjs
:revealjs_theme: serif
:customcss: resources/my-css.css
:revealjs_slideNumber: c/t
:title-slide-transition: none
:icons: font
:revealjs_hash: true
:revealjs_center: true
:revealjs_autoPlayMedia: true
:revealjs_transition: false  
:revealjs_transitionSpeed: fast

== !

image::moo.jpg[]

link:https://matoken.org/blog/2019/04/02/april-fools-cow-from-apt-apt-get/[`$ apt --color moo moo 2>/dev/null | sed -e 's/Have you mooed today?/Happy MOO Year!/'`]

== link:https://matoken.org[Kenichiro Matohara(matoken) https://matoken.org]

image::map.jpg[background, size=cover]

* å—éš…ã‹ã‚‰å‚åŠ (é¹¿å…å³¶ã®å³ä¸‹)
* å¥½ããªLinuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯Debian
* ãŠä»•äº‹å‹Ÿé›† mailto:work@matohara.org

== æœ€è¿‘ã®ç™ºè¡¨

* ã€Œlink:https://www.edocr.com/v/3al6wy4p[èª°ã§ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰]ã€ link:https://kagolug.connpass.com/event/197081/[é¹¿å…å³¶Linuxå‹‰å¼·ä¼š 2020.12(ã‚ªãƒ³ãƒ©ã‚¤ãƒ³é–‹å‚¬)] 2020-12-26
* ã€Œlink:https://www.edocr.com/v/47o8nae4[VeraCryptã‚’zuluCryptã§]ã€ link:https://koedolug.connpass.com/event/198954/[å°æ±Ÿæˆ¸ã‚‰ã 1æœˆã®ã‚ªãƒ•ãªé›†ã¾ã‚Š(ç¬¬222å›)] 2021-01-09

== é¹¿å…å³¶ã‚‰ã

* æ¬¡å› 2021-01-31(sun)
** link:https://kagolug.connpass.com/event/200913/[é¹¿å…å³¶Linuxå‹‰å¼·ä¼š 2021.01(ã‚ªãƒ³ãƒ©ã‚¤ãƒ³é–‹å‚¬)]
* ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹2021 Springã«ã‚‚å‚åŠ äºˆå®š

== BitBar/SwiftBar

* Podcastã®Rebuild.fm 292å›ã§BitBar, SwiftBar ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã«ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’è¡¨ç¤ºã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã‚’çŸ¥ã‚‹
** link:https://rebuild.fm/292/[Rebuild: 292: Two Chickens, One Stone (hak)]
** link:https://github.com/matryer/bitbar[GitHub - matryer/bitbar: Put the output from any script or program in your Mac OS X Menu Bar]
** link:https://swiftbar.app/[SwiftBar]
* macOSç”¨
* Linuxã§å‹•ãã‚‚ã®ãŒãªã„ã‹æ¢ã—ã¦ã¿ã‚‹
https://nitter.net/matoken1/status/1344632867100364801

== BitBar/SwiftBar Alternative

* link:https://github.com/p-e-w/argos[GitHub - p-e-w/argos: Create GNOME Shell extensions in seconds]
* link:https://github.com/lipido/kargos[GitHub - lipido/kargos: KDE Plasma port of GNOME Argos and OSX BitBar]
* link:https://github.com/ssimono/margos[GitHub - ssimono/margos: Create Mate applets from your script output]

ç¾ç’°å¢ƒã¯Awesome wmãªã®ã§ã©ã‚Œã‚‚å‹•ã‹ãªã•ãã†ï¼ˆâ—â€¸â—Ÿï¼‰

== Margosã‚’è©¦ã™

* ã¨ã‚Šã‚ãˆãšä¸€ç•ªå°å…¥ãŒæ¥½ãã†ãªMateã‚’å°å…¥ã—ã¦Margosã‚’è©¦ã™
* Margosã«ã¯Mate 1.18ä»¥ä¸Šï¼Œgtk-3ï¼ŒPython 3.6ä»¥ä¸Šï¼ŒpipãŒå¿…è¦

== margoså°å…¥

[source,shell]
----
$ sudo pip3 install -U margos <1>
$ sudo margos install <2>
$ killall mate-panel <3>
----

<1> pipã‚³ãƒãƒ³ãƒ‰ã§margosã‚’å°å…¥
<2> ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç’°å¢ƒã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
<3> mate-panelã‚’å†èµ·å‹•ã™ã‚‹

== margosã‚¢ãƒ—ãƒ¬ãƒƒãƒˆç™»éŒ²

* ãƒ‘ãƒãƒ«ã«ã‚¢ãƒ—ãƒ¬ãƒƒãƒˆã‚’ç™»éŒ²ã—ã¦ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ç™»éŒ²
* ãƒ‘ãƒãƒ«ã§å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¢ãƒ—ãƒ¬ãƒƒãƒˆã®è¿½åŠ 
* ã‚¢ãƒ—ãƒ¬ãƒƒãƒˆå†…ã®ã€Œã‚³ãƒãƒ³ãƒ‰ã€ã‚’é¸æŠã—ã¦è¿½åŠ 

image:margos_addpanel.jpg[width=40%]

* ç™»éŒ²ã•ã‚ŒãŸmargosã¯æ—¢å®šå€¤ã§æ™‚è¨ˆ
* å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ŒPrefarenceã€ã§è¨­å®šç”»é¢ã«
* ã€ŒCommandã€éƒ¨åˆ†ã«ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ï¼Œã€ŒIntervalã€ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹é–“éš”ã®ç§’æ•°ã‚’æŒ‡å®š

image:margos_setting.jpg[]

link:https://github.com/fcambus/ansiweather[ansiweather]ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã§å¤©æ°—ã‚’è¡¨ç¤º

image:margos_ansiwather.jpg[]

`ansiweather -l chiyoda,JP -u metric -f 1 -a false -s true`

== ã„ãã¤ã‹ã®å•é¡Œ

=== ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãŒãã®ã¾ã¾å‡ºåŠ›ã•ã‚Œã‚‹

* colorãªã©ã¯ä½¿ã‚ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ï¼

image:margos_esc.jpg[]

`wego -d 1 -f emoji | head -4 | tail -1`

=== æ—¥æœ¬èªã‚„è¨˜å·ã®å•é¡Œ

* `âš¡21æ™‚/84%` ã¨è¡¨ç¤ºã—ãŸã„ã¨ã“ã‚ã® `æ™‚` éƒ¨åˆ†ãŒ `?` ã«ãªã‚Šï¼Œ `%` ãŒæ¶ˆãˆã¦ã—ã¾ã£ãŸ
* çµµæ–‡å­—ãŒOKã§æ—¥æœ¬èªãŒNGãªãƒ‘ã‚¿ãƒ¼ãƒ³ã¯åˆã‚ã¦è¦‹ãŸæ°—ãŒã™ã‚‹

image:margos_kanji_par.jpg[]

----
echo -n âš¡$((`date +%H`-1))æ™‚/; \
curl -s https://www.kyuden.co.jp/td_power_usages/csv/juyo-hourly-`date +%Y%m%d`.csv | \
head -38 | tail -24 | grep ,$(( `date +%H` -1 )):00 | cut -z -d, -f5;echo %
----

NOTE: ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã‚ˆã‚Šã†ã¾ãå‹•ã‹ãªã„ã®ã«æ°—ã¥ã„ãŸ><

=== ãƒ‘ã‚¤ãƒ—ç­‰ã‚’ä½¿ã†ã¨å‹•ã‹ãªã„

* `|` ã§ã¤ãªã„ã ã‚Šã™ã‚‹ã¨ã†ã¾ãå‹•ã‹ãªã„
* `sh -c "command1 | command2"` ã®ã‚ˆã†ã«shçµŒç”±ã§å‹•ã‹ã™ã¨OK
* ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã—ã¦ãã‚Œã‚’æŒ‡å®šã—ãŸã»ã†ãŒã„ã„?

== Margosã¾ã¨ã‚

* Margosã¯BitBarã«æ¯”ã¹ã‚‹ã¨æ©Ÿèƒ½ãŒå°‘ãªã„
* watchã‚³ãƒãƒ³ãƒ‰ã‚’Mateãƒ‘ãƒãƒ«ã«ç½®ãæ„Ÿã˜

== Argosã‚’è©¦ã™

* Margosã®æ©Ÿèƒ½ãŒå°‘ãªã„ã®ã§Gnome Shellç’°å¢ƒã‚’ç”¨æ„ã—ã¦Argosã‚’è©¦ã™
* Gnome shellã®æ‹¡å¼µæ©Ÿèƒ½ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã‚‹
* BitBarã‚³ãƒ³ãƒ‘ãƒ!

** link:https://github.com/p-e-w/argos[p-e-w/argos: Create GNOME Shell extensions in seconds]

== Argoså°å…¥

* link:https://extensions.gnome.org/extension/1176/argos/[Argos - GNOME Shell æ‹¡å¼µæ©Ÿèƒ½]
* ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰å°å…¥ã‚‚ã—ãã¯æ‰‹å‹•ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å±•é–‹
* ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚ã¯Gnome shellã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹

.Gnome Shellãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
[source,shell]
----
$ gnome-shell --version
GNOME Shell 3.38.3
----

.æ‰‹å‹•ã§ã®å°å…¥
[source,shell]
----
$ mkdir -p ~/.local/share/gnome-shell/extensions
$ unzip ./argospew.worldwidemann.com.v3.shell-extension.zip \
-d ~/.local/share/gnome-shell/extensions/argos@pew.worldwidemann.com/
----

**Alt+F2 râ†²** ã§Gnome Shellã‚’å†èµ·å‹•ã—ã¦åæ˜ 

== Gnome ShellãŒæ–°ã—ã„ã¨ã†ã¾ãå‹•ã‹ãªã„

* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã«ã¯ç¾ã‚Œã‚‹ãŒã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ã‹ãªã„
* Gnome ShellãŒæ–°ã—ã„ã¨ã“ã†ãªã‚‹ã‚‰ã—ã„(3.36+?ä»Šå›ã¯3.38.3)
** link:https://github.com/p-e-w/argos/issues/120[Argos menus won't open on Ubuntu 20.04 - Is it a known issue? Â· Issue #120 Â· p-e-w/argos Â· GitHub]
* Gitãƒªãƒã‚¸ãƒˆãƒªã®masterã¨ä»¥ä¸‹ã®PRã®patchã‚’åˆ©ç”¨ã—ã¦å‹•ä½œ
** link:https://github.com/p-e-w/argos/pull/111[Use registerClass to make plugin compatible with gnome 3.36. by rammie Â· Pull Request #111 Â· p-e-w/argos Â· GitHub]

== å°å…¥ã—ç›´ã—

* Gnome Shell 3.36+ã®å ´åˆã®ã¿

=== æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‰Šé™¤
[source,shell]
----
$ gnome-extensions disable argos@pew.worldwidemann.com <1>
$ gnome-extensions uninstall argos@pew.worldwidemann.com <2>
----

<1> ç„¡åŠ¹åŒ–
<2> ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

=== Gitã®masterã¨PRé©ç”¨

[source,shell]
----
$ git clone github.com/p-e-w/argos <1>
$ cd argos
$ cp -p ./argos@pew.worldwidemann.com \
~/.local/share/gnome-shell/extensions/ <2>
$ wget https://raw.githubusercontent.com/p-e-w/argos/c4663d9d3e29ef33b7e9123ef0c095811c91cf5b/argos%40pew.worldwidemann.com/menuitem.js \
-O ~/.local/share/gnome-shell/extensions/argos@pew.worldwidemann.com/menuitem.js <3>
----

<1> ãƒªãƒã‚¸ãƒˆãƒªclone
<2> æ‹¡å¼µæ©Ÿèƒ½ã‚³ãƒ”ãƒ¼
<3> Gnome Shell 3.36+å‘ã‘ã®ä¿®æ­£ã‚’é©ç”¨

**Alt+F2 râ†²** ã§Gnome Shellã‚’å†èµ·å‹•ã—ã¦åæ˜ 

== Argosãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç¢ºèª

* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã«**Argos**ãŒç¾ã‚Œã‚‹
* ã‚¯ãƒªãƒƒã‚¯ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒè¡¨ç¤ºã•ã‚Œã‚‹
* æœ€ä¸‹éƒ¨ã® `argos.sh` ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã‹ã‚Œã‚‹

image:argos-argos.jpg[]

=== Argos.sh

[source,shell]
----
#!/usr/bin/env bash

URL="github.com/p-e-w/argos"
DIR=$(dirname "$0")

echo "Argos"
echo "---"
echo "$URL | iconName=help-faq-symbolic href='https://$URL'"
echo "$DIR | iconName=folder-symbolic href='file://$DIR'"

----

== Argos Plugin

* `~/.config/argos/` ã«**å®Ÿè¡Œå¯èƒ½**ãƒ—ãƒ©ã‚°ãƒ©ãƒ ã‚„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç½®ãã¨å³å®Ÿè¡Œã•ã‚Œã‚‹
* STDOUTå‡ºåŠ›çµæœ1è¡Œç›®ãŒãƒãƒ¼ã«è¡¨ç¤ºã•ã‚Œï¼Œ`---` ã®å¾ŒãŒã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å†…ã«è¡¨ç¤ºã•ã‚Œã‚‹
* ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã¯ãƒ•ã‚¡ã‚¤ãƒ«åã§åˆ¶å¾¡  +
  `hoge.3s+.sh` #3ç§’æ¯ã«å®Ÿè¡Œ  +
  `fuga.10m+.py` #10åˆ†æ¯ã«å®Ÿè¡Œ
* è‰²ã‚’ä»˜ã‘ãŸã‚Šã‚¢ã‚¤ã‚³ãƒ³ã‚’è¨­å®šã—ãŸã‚Šâ€¦â€¦

== wegoã§å¤©æ°—è¡¨ç¤º

å¤©æ°—ã‚’ãƒãƒ¼ã«è¡¨ç¤ºã—ã¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨2æ—¥åˆ†ã®å¤©æ°—äºˆå ±ã‚’è¡¨ç¤º(ç½«ç·šãŒå´©ã‚Œã¦ã„ã‚‹)

image:argos-wego.jpg[]

=== !

.~/.config/argos/wego.1h+.sh
[source,shell]
----
#!/bin/bash

STR=`wego -d 2 -f emoji`
echo "`echo "${STR}" | head -4 | tail -1`"
echo "---"
echo "${STR}" | awk 1 ORS="\\\\n"
echo " | font=monospace"
----

== CPUã®æ¸©åº¦ã¨topè¡¨ç¤º

1åˆ†æ¯ã«CPUã®æ¸©åº¦ã‚’ãƒãƒ¼ã«è¡¨ç¤ºã—ã¦ï¼Œã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨topã‚³ãƒãƒ³ãƒ‰ã‚’è¡¨ç¤º

image:argos-cputhermal.jpg[]

=== !

.~/.config/argos/cputhermal.1m+.sh
[source,shell]
----
#!/bin/bash

THERMAL=`acpi -t | awk '{print $4}'`
COLOR="white"

if [ `echo "${THERMAL} >= 80" | bc` == 1 ] ; then
        COLOR="red"
fi

#echo "<span color='${COLOR}' weight='normal'><tt>ğŸŒ¡${THERMAL}â„ƒ </tt></span>"
echo "ğŸŒ¡${THERMAL}â„ƒ  | color=${COLOR}"
echo "---"
if [ "${ARGOS_MENU_OPEN}" == "true" ]; then
        TOP_OUTPUT=$(top -b -n 1 | head -n 20 | awk 1 ORS="\\\\n")
        echo "${TOP_OUTPUT} | font=monospace bash=top"
else
        echo "Loading..."
fi
----

â€»è‰²ãŒå¤‰æ›´ã§ããªã„?

== BitBar Pluginåˆ©ç”¨

* BitBarã¨äº’æ›æ€§ãŒã‚ã‚‹ã®ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒæµç”¨ã§ãã‚‹
* scriptã«ã‚ˆã‚ŠAPI keyã‚„åº§æ¨™ã‚’è¨˜è¿°ã—ãŸã‚Šã¯å¿…è¦
* BitBarã¯macOSå‘ã‘ãªã®ã§ã‚·ã‚¹ãƒ†ãƒ å‘¨ã‚Šã¯å‹•ã‹ãªã‹ã£ãŸã‚ŠPATHãŒé•ã£ãŸã‚Šã‚‚
** link:https://github.com/matryer/bitbar-plugins[GitHub - matryer/bitbar-plugins: Plugin repository for BitBar]

=== HackserNewsã‚’è¡¨ç¤ºã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åˆ©ç”¨ä¾‹

[source,shell]
----
$ git clone https://github.com/matryer/bitbar-plugins
$ cd bitbar-plugins
$ ln -s `pwd`/Web/HackerNews/hacker_news.1m.rb ~/.config/argos/
----

=== !

image:argos-hackernews.jpg[]

== Kargos

link:https://github.com/lipido/kargos[GitHub - lipido/kargos: KDE Plasma port of GNOME Argos and OSX BitBar]

* KDE Plasmaå‘ã‘
* å‹•ä½œæœªç¢ºèª

.ã¡ã‚‡ã„å¤ãã†
____
A Plasma port of Argos and BitBar plugins to fast create custom plasmoids.

Note: This is an alpha project. By now, it only was tested on Kubuntu 16.04 LTS.
____

== ãã®ä»–

* link:https://blog.goo.ne.jp/sabotenboy_london/e/8628856ec214d667cb90c7d421ac482e[ãƒã‚¸ãƒ§ã‚«ã‚¢ã‚¤ãƒªã‚¹ã‚’ãƒ¢ãƒ‹ã‚¿ä¸Šã«è¨­ç½®]
* å°å‹ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤
* ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³

=== å°ã•ãªã‚¹ãƒãƒ›ã‚’å¤–éƒ¨ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã«


[.right]
.link:https://www.deskreen.com/[Deskreen]ã§link:https://github.com/isaki68k/sayaka[sayaka]ã§Tweetæµã—ã¦ã„ã‚‹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’å…±æœ‰ã—ã¦Rakuten miniã§è¡¨ç¤º
image::deskreen-rmini.jpg[width=60%]

== ã¾ã¨ã‚

* ArgosãŠã™ã™ã‚Gnome Shellç’°å¢ƒã®æ–¹ã¯ãœã²
** Shell Scriptãªã©ã‚’ã¡ã‚‡ã£ã¨æ›¸ãã ã‘ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã«ã„ã‚ã„ã‚ãªæƒ…å ±ã‚’è¡¨ç¤ºæ¥ã¦ä¾¿åˆ©
* ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ç¯„å›²ãŒé™ã‚‰ã‚Œã‚‹ -> å¤§ããªãƒ¢ãƒ‹ã‚¿ã»ã—ã„
* awesome wmã§ã‚‚å‹•ãæ±ç”¨çš„ãªãƒ„ãƒ¼ãƒ«ã»ã—ã„

== å¥¥ä»˜

* ç™ºè¡¨
** link:https://tokaidolug.connpass.com/event/198980/[æ±æµ·é“ã‚‰ãã€€ã‚ã²ã‚‹ç„¼ãã•ã‚“ã®ãƒ©ã‚¤ãƒˆãƒ‹ãƒ³ã‚°ãƒˆãƒ¼ã‚¯ãƒ€ãƒ¼ãƒ“ãƒ¼ï¼] 2021-01-23(sat)
* ç™ºè¡¨è€…
** link:https://matoken.org/[Kenichiro Matohara(matoken)]
* ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
** CC BY-NC-SA 4.0
